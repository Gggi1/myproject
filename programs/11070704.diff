#include <stdio.h>
#include <stdlib.h>

#define INISIZE 10

int main()
{
    char *line;
    size_t bufsize;
    ssize_t len;
    int i;


    bufsize = INISIZE;

    line = (char *)malloc(bufsize * sizeof(line));
    if (NULL == line)
    {
        fprintf(stderr, "Memory allocation failed!");
        return 1;
    }
    printf("Enter text(Ctrl + D to end):\n");
    while ((len = getline(&line, &bufsize, stdin)) != -1)
    {
        for (i = len - 1;i >= 0;i--)
        {
            if (line[i] == ' ' || line[i] == '\t' || line[i] == '\n')
            {
                line[i] = '\0';
            }
            else
            {
                break;
            }
            
        }

        if (line[0] == '\0')
        {
            continue;
        }

        printf("行长度:%d\n%s\n", i + 1, line);
    }


    free(line);

    return 0;
}












